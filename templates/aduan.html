{% extends "dsh.html"%}
{% block site %}
  <h4><i class="fa fa-database"></i>
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
  Aduan</h4>
  {% endblock%}
  
{% block content %}
  <div style="height: 578px">
    <div style=" float: right; margin-right:5px; margin-bottom:20px">
      <!-- <button type="button" class="btn btn-sm" style="background-color:green; color:aliceblue; width:80px" id="tambah">
        <i class="fa-solid fa-file"></i>&nbsp;&nbsp;Add
      </button> -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    </div>
    
    <table class="table" style="font-size: 14px;">
      <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Nama Pengadu</th>
            <th scope="col">No Handphone</th>
            <th scope="col">Aduan</th>
            <th scope="col">Bukti Aduan</th>
            <th scope="col">Status Aduan</th>
            <th scope="col">Tanggapan Aduan</th>
            <th scope="col">Tanggal Aduan</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for row in data %}
          <tr>
            <th scope="row">{{ row.0 }}</th>
            <td>{{ row.1 }}</td>
            <td>{{ row.2 }}</td>
            <td>{{ row.3 }}</td>
            <td>
                <img style="width:50px; height:50px;" src="static/uploads/{{ row.4 }}" alt="gambar">
            </td>
            <td>
            {% if ( row.6 == "terkirim") : %}
              <span class="badge" style="background-color:rgb(169, 16, 5);">Belum Ditanggapi</span>             
            {% else : %}
              <span class="badge" style="background-color:rgb(3, 94, 12);">Sudah Ditanggapi</span>
            </td>     
            {% endif %}
            <td>
            {% if ( row.7 == None) : %}
              
            {% else : %}
              {{ row.7 }}
            {% endif %}
            </td>
            <td>{{ row.5 }}</td>
            <td>
              <button  type="button" data-target="#modalDetails{{ row.0 }}" style="background-color:rgb(20, 98, 4); border-radius: 5px; border-color:rgb(21, 128, 0);  ; color:#fff; width: 50px;" data-toggle="modal">Detail</button>
						  <button  type="button"  data-target="#modalTanggapi{{ row.0 }}" style="background-color:#eb9a0f; border-radius: 5px; border-color:#eb9a0f ; color:#fff; width: 70px;" data-toggle="modal">Tanggapi</button>
              <form action=" /delete_data_aduan/{{ row.0 }}" method="POST"> 
                <button type="submit"  style="background-color:rgb(182, 19, 19); color:#fff; width: 60px; border-radius: 5px; text-align:center; border-color: rgb(182, 19, 19);" onclick="return confirm('yakin ingin dihapus ? ')">Hapus</a>
              </form>
            </td>  
          </tr>

          <div class="modal fade" id="modalTanggapi{{ row.0 }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header" style="background-color:#eb9a0f; ">
                  <h5 class="modal-title" id="exampleModalLabel" style=" color:#fff;">Tanggapi Aduan</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form action="{{ url_for('update_data_aduan') }}" method="POST">
                    <div class="form-group row">
                      <div class="col-sm-12">
                      <input type="hidden" name="id_data" id="id_data" value="{{ row.0 }}">
                      <input type="text"  class="form-control" name="nama" id="nama" placeholder="Nama" autofocus readonly value="{{ row.1 }}">
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                      <input type="text" class="form-control" name="no_hp" id="no_hp" placeholder="No Handphone" readonly value="{{ row.2 }}">
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                        <textarea style="overflow-x:scroll" class="form-control" name="aduan" id="aduan" placeholder="Aduan" readonly >{{ row.3 }}</textarea> 
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                        <label>Bukti Aduan</label>
                      </div>
                      <img style="width:80px; height:80px;  margin-left:13px;" src="static/uploads/{{ row.4 }}" alt="gambar">
                    </div>  
                    <div class="form-group row">
                       <div class="col-sm-12">
                        {% if ( row.7 == None) : %}
                          <input type="text" class="form-control" name="tanggapan"  placeholder="Masukan Tanggapan" required value="">
                        {% else : %}
                          <input type="text" class="form-control" name="tanggapan" id="tanggapan" placeholder="Tanggapan" value="{{ row.7 }}">
                        {% endif %}
                      </div>
                    </div> 
                  </div>
                  <div class="modal-footer">
                    <button type="button"  data-dismiss="modal" style="background-color:rgb(182, 19, 19); color:#fff; width: 60px; border-radius: 5px;  border-color: rgb(182, 19, 19); " >Batal</button>
                    <button type="submit"  style="background-color:rgb(12, 68, 132); border-radius: 5px; border-color:rgb(12, 68, 132);  ; color:#fff; width: 50px;">Kirim</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="modalDetails{{ row.0 }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header" style="background-color:rgb(20, 98, 4); text-align:center;">
                  <h5 class="modal-title" id="exampleModalLabel" style="text-align:center; color:#fff;">Detail Tanggapan</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form action="#!" method="POST">
                    <div class="form-group row">
                      <div class="col-sm-12">
                      <input type="text"  class="form-control" name="nama" id="nama" placeholder="Nama" autofocus readonly value="{{ row.1 }}">
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                      <input type="text" class="form-control" name="no_hp" id="no_hp" placeholder="No Handphone" readonly value="{{ row.2 }}">
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                        <textarea style="overflow-x:scroll" class="form-control" name="aduan" id="aduan" placeholder="Aduan" readonly >{{ row.3 }}</textarea> 
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-12">
                        <label>Bukti Aduan</label>
                      </div>
                      <img style="width:80px; height:80px; margin-left:13px;" src="static/uploads/{{ row.4 }}" alt="gambar">
                    </div>  
                    <div class="form-group row">
                      <div class="col-sm-12">
                        {% if ( row.7 == None) : %}
                          <input type="text" class="form-control" name="tanggapan"  readonly value="">
                        {% else : %}
                          <input type="text" class="form-control" name="tanggapan" id="tanggapan" readonly placeholder="Tanggapan" value="{{ row.7 }}">
                        {% endif %}
                      </div>
                    </div> 
                  <div class="modal-footer">
                    <button type="button"  data-dismiss="modal" style="background-color:rgb(182, 19, 19); color:#fff; width: 50px; border-radius: 5px; border-color: rgb(182, 19, 19); " >Batal</button>
                    <button type="submit"  style="background-color:rgb(12, 68, 132); border-radius: 5px; border-color:rgb(12, 68, 132);  ; color:#fff; width: 50px;">Kirim</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
          {%endfor%}
        </tbody>

    </table>


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  
  </div>


  <!-- Button trigger modal
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Launch demo modal
</button> -->

<!-- Modal -->
<!-- <div class="modal fade" id="modalTanggapi" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div> -->

{%endblock%}
